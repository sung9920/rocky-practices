## network 설정

### 1. hostname

1. [/etc/hostname](https://github.com/sung9920/rocky-practices/blob/main/lx/etc/hostname) 호스트 이름 설정
```sh
lx.sung.com
```

2. 재부팅

3. 확인
```sh
# hostname
lx.sung.com
#
```

### 2. deny ping
1. ping deny 여부 확인
```sh
# cat /proc/sys/net/ipv4/icmp_echo_ignore_all
0
#
```

2. [/etc/sysctl.conf](https://github.com/sung9920/rocky-practices/blob/main/lx/etc/sysctl.conf) 설정
```sh

...

net.ipv4.icmp_echo_ignore_all=1

...

```

2. 설정 적용하기
```sh
# sysctl -p
net.ipv4.icmp_echo_ignore_all = 1
#
```

### 3. IP fixed
0. 최초 *nmtui* 로 아이피 설정할 것!
```sh
# nmtui
```
   
1. NIC 장치이름 확인
```sh
# nmcli connection
NAME    UUID                                  TYPE      DEVICE 
enp0s3  025ad397-dabf-3333-9723-edba87ac5355  ethernet  enp0s3 
lo      1e0fc25a-6d47-4a10-a3bb-6a095ca1ecd7  loopback  lo
#
```

2. 두 번째부터 수정 가능
   [/etc/NetworkManager/system-connectios/enp0s3.nmconnection](https://github.com/sung9920/rocky-practices/blob/main/lx/etc/NetworkManager/system-connectios/enp0s3.nmconnection)
   
```sh
[ipv4]
method=manual
address=192.168.0.177/24, 192.168.0.1
dns=168.126.63.1; 1.1.1.1
may-fail=true

...

```

3. 적용1
```sh
# systemctl restart NetworkManager
# nmcli dev show enp0s3
GENERAL.DEVICE:                         enp0s3
GENERAL.TYPE:                           ethernet
GENERAL.HWADDR:                         08:00:27:D1:71:C8
GENERAL.MTU:                            1500
GENERAL.STATE:                          100 (connected)
GENERAL.CONNECTION:                     enp0s3
GENERAL.CON-PATH:                       /org/freedesktop/NetworkManager/ActiveConnection/2
WIRED-PROPERTIES.CARRIER:               on
IP4.ADDRESS[1]:                         192.168.0.176/24
IP4.GATEWAY:                            192.168.0.1
IP4.ROUTE[1]:                           dst = 192.168.0.0/24, nh = 0.0.0.0, mt = 100
IP4.ROUTE[2]:                           dst = 0.0.0.0/0, nh = 192.168.0.1, mt = 100
IP4.DNS[1]:                             168.126.63.1
IP4.DNS[2]:                             1.1.1.1
IP6.ADDRESS[1]:                         fe80::a00:27ff:fed1:71c8/64
IP6.GATEWAY:                            --
IP6.ROUTE[1]:                           dst = fe80::/64, nh = ::, mt = 1024
```

4. 적용2
```sh
# nmcli con reload
# nmcli con down enp0s3
# nmcli con up enp0s3
# nmcli dev show enp0s3
GENERAL.DEVICE:                         enp0s3
GENERAL.TYPE:                           ethernet
GENERAL.HWADDR:                         08:00:27:D1:71:C8
GENERAL.MTU:                            1500
GENERAL.STATE:                          100 (connected)
GENERAL.CONNECTION:                     enp0s3
GENERAL.CON-PATH:                       /org/freedesktop/NetworkManager/ActiveConnection/2
WIRED-PROPERTIES.CARRIER:               on
IP4.ADDRESS[1]:                         192.168.0.176/24
IP4.GATEWAY:                            192.168.0.1
IP4.ROUTE[1]:                           dst = 192.168.0.0/24, nh = 0.0.0.0, mt = 100
IP4.ROUTE[2]:                           dst = 0.0.0.0/0, nh = 192.168.0.1, mt = 100
IP4.DNS[1]:                             168.126.63.1
IP4.DNS[2]:                             1.1.1.1
IP6.ADDRESS[1]:                         fe80::a00:27ff:fed1:71c8/64
IP6.GATEWAY:                            --
IP6.ROUTE[1]:                           dst = fe80::/64, nh = ::, mt = 1024
```
